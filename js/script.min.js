const openButton = document.querySelector(".open-modal-btn"), modal = document.querySelector(".book-modal"), modalBg = document.querySelector(".modal-bg"), closeButton = modal.querySelector(".book-modal__close"), form = modal.querySelector(".book-modal__form"), nameField = form.querySelector('[name="name"]'), emailField = form.querySelector('[name="email"]'), phoneField = form.querySelector('[name="phone"]'), storedName = localStorage.getItem("name"), storedEmail = localStorage.getItem("email"), storedPhone = localStorage.getItem("phone"), openModal = () => { modal.classList.add("modal-show"), modalBg.classList.add("modal-bg-show"), nameField.value = storedName, emailField.value = storedEmail, phoneField.value = storedPhone, closeButton.addEventListener("click", closeModal), window.addEventListener("keydown", closeWithKeyPress), form.noValidate = !0, form.addEventListener("submit", submitForm) }, closeModal = () => { modal.style.animation = "close 300ms", modal.classList.remove("modal-show"), modalBg.classList.remove("modal-bg-show"), setTimeout(() => { modal.removeAttribute("style") }, 300), closeButton.removeEventListener("click", closeModal), window.removeEventListener("keydown", closeWithKeyPress), form.removeEventListener("submit", submitForm) }, submitForm = e => { if (!nameField.value && !emailField.value && !phoneField.value) return e.preventDefault(), modal.classList.remove("modal-error"), modal.clientHeight = modal.clientHeight, void modal.classList.add("modal-error"); localStorage.setItem("name", nameField.value), localStorage.setItem("email", emailField.value), localStorage.setItem("phone", phoneField.value) }, closeWithKeyPress = e => { "Escape" === e.key && closeModal() }; openButton.addEventListener("click", openModal);
